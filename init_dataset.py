import hashlib
import json
import phe as paillier


if __name__ == '__main__':
    public_key, private_key = paillier.generate_paillier_keypair()

    user_headers = ["type", "user_id", "encrypted_password", "init_profile", "actual_ratings", "mask", "lr", "pred_ratings"]
    songs_headers = ["type", "song_id", "song_profile", "lr", "users_count"]

    sample_users = [
        ["users", 1, hashlib.sha512("password1".encode()).hexdigest(), [0.1,0.2,0.3,0.3,0.7,0.6,0.5,0.3,0.3,0.7,0.6,0.5,0.5,0.6,0.6], [4,3,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0,0,0,0,0,0,0,0,0,0,0,0,0], 0.01, [0.4,0.5,0.6,0.6,0.7,0.5,0.7,0.6,0.5,0.6,0.5,0.7,0.6,0.7,0.5]],
        ["users", 2, hashlib.sha512("password2".encode()).hexdigest(), [0.2,0.3,0.4,0.3,0.7,0.6,0.5,0.3,0.3,0.7,0.6,0.5,0.5,0.6,0.6], [5,2,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0,0,0,0,0,0,0,0,0,0,0,0,0], 0.01, [0.3,0.6,0.6,0.6,0.7,0.5,0.7,0.6,0.5,0.6,0.5,0.7,0.6,0.7,0.5]],
        ["users", 3, hashlib.sha512("password3".encode()).hexdigest(), [0.3,0.4,0.5,0.3,0.7,0.6,0.5,0.3,0.3,0.7,0.6,0.5,0.5,0.6,0.6], [5,3,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0,0,0,0,0,0,0,0,0,0,0,0,0], 0.01, [0.3,0.5,0.6,0.6,0.7,0.5,0.7,0.6,0.5,0.6,0.5,0.7,0.6,0.7,0.5]],
        ["users", 4, hashlib.sha512("password4".encode()).hexdigest(), [0.3,0.4,0.6,0.3,0.7,0.6,0.5,0.3,0.3,0.7,0.6,0.5,0.5,0.6,0.6], [2,5,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0,0,0,0,0,0,0,0,0,0,0,0,0], 0.01,
         [0.3,0.5,0.7,0.6,0.7,0.5,0.7,0.6,0.5,0.6,0.5,0.7,0.6,0.7,0.5]],
        ["users", 5, hashlib.sha512("password5".encode()).hexdigest(), [0.2,0.4,0.5,0.3,0.7,0.6,0.5,0.3,0.3,0.7,0.6,0.5,0.5,0.6,0.6], [4,3,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0], 0.01,
         [0.2,0.5,0.6,0.6,0.7,0.5,0.7,0.6,0.5,0.6,0.5,0.7,0.6,0.7,0.5]]
    ]

    sample_songs = [
        ["songs", 1, [0.7,0.8,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 5],
        ["songs", 2, [0.6,0.7,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8], 0.02, 5],
        ["songs", 3, [0.5,0.7,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 0],
        ["songs", 4, [0.4,0.7,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8], 0.02, 0],
        ["songs", 5, [0.3,0.7,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8], 0.02, 0],
        ["songs", 6, [0.5,0.6,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4], 0.02, 0],
        ["songs", 7, [0.5,0.7,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4], 0.02, 0],
        ["songs", 8, [0.6,0.6,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 0],
        ["songs", 9, [0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5], 0.02, 0],
        ["songs", 10, [0.5,0.7,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 0],
        ["songs", 11, [0.3,0.8,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2], 0.02, 0],
        ["songs", 12, [0.1,0.8,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 0],
        ["songs", 13, [0.2,0.7,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8], 0.02, 0],
        ["songs", 14, [0.6,0.2,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9], 0.02, 0],
        ["songs", 15, [0.4,0.7,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5], 0.02, 0]
    ]

    data = {
        "users": [dict(zip(user_headers, user)) for user in sample_users],
        "songs": [dict(zip(songs_headers, song)) for song in sample_songs]
    }

    with open("dataset.json", "w") as json_file:
        json.dump(data, json_file, indent=4)

    print("Initial data has been written to dataset.json")